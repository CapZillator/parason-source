import React, { useContext } from 'react';
import { AppContext } from '../store/context';
import { roundDigit, parseCityFromDataArray, sunriseSunsetDayduration, getWindDir, convertWindSpeedVal, getBofortScaleVal, 
    convertToStringT, convertAccuracyToString, checkCoords } from '../Lib';
import getLangPack from '../LangPack';
import '../styles/Chart.scss';

function CircleChart(props: any) {
    const { state, dispatch } = useContext(AppContext);
    const lang = getLangPack(state.lang.code);
    let percent, mainVal;
    switch (props.type){
        case 'general': {
            percent = props.val; 
            mainVal = `${props.val}%`;
        }; break;
        case 'uvi': {
            percent = Math.round(props.val * 9);
            percent = percent > 100 ? 100: percent;
            mainVal = props.val === 0 ? '0.0': props.val;
        }; break;
        case 'press': {
            mainVal = props.val;
        }; break;
        default: {
            percent = props.val;
            mainVal = props.val;
        }; break;
    }
    const dasharray: string = props.type === 'press' ? '100 0': `${percent} ${100 - percent}`;
    let path;
    switch (props.icon){
        case 'hum': path = <path className="Circle-icon" d="m19.741 18.36c-0.50235-0.04397-0.93114-0.17835-1.4066-0.44083-0.35884-0.19808-0.76158-0.56871-1.0366-0.95398-0.30888-0.43268-0.50271-0.93308-0.58382-1.5073-0.02054-0.14537-0.01753-0.54449 0.0052-0.68861 0.0412-0.26132 0.12265-0.53307 0.25802-0.86081 0.08067-0.1953 0.34387-0.72905 0.47908-0.9715 0.44664-0.80093 1.0983-1.7646 1.8285-2.7038 0.20383-0.26218 0.70893-0.8937 0.71479-0.8937 0.0043 0 0.44578 0.5521 0.62582 0.78264 0.83408 1.0681 1.5157 2.0713 1.9366 2.8503 0.14117 0.26128 0.35921 0.69908 0.43591 0.87528 0.13697 0.31464 0.24178 0.66171 0.28324 0.93794 0.02531 0.16856 0.02496 0.52881-7.23e-4 0.70394-0.08941 0.6112-0.32012 1.1564-0.68255 1.6129-0.46821 0.58976-1.0934 0.99375-1.8151 1.1729-0.32945 0.08178-0.71553 0.11311-1.0418 0.08455zm-0.26441-0.98713c0-0.0026-0.07496-0.05407-0.16658-0.11444-0.22433-0.14784-0.36014-0.25792-0.53715-0.43537-0.17558-0.17602-0.25671-0.27514-0.39452-0.48201-0.21944-0.32941-0.3624-0.67335-0.44479-1.0701-0.04939-0.23783-0.05925-0.35336-0.05901-0.69086 2.88e-4 -0.39706 0.0308-0.64504 0.13144-1.0682 0.02352-0.09889 0.04524-0.1905 0.04828-0.20359 0.0094-0.0407-0.01-0.02651-0.06425 0.04703-0.29288 0.39679-0.48513 0.8778-0.56138 1.4046-0.02587 0.17874-0.02601 0.59956-2.88e-4 0.80652 0.06113 0.49132 0.23152 0.8525 0.5591 1.1851 0.36641 0.37207 0.83767 0.57511 1.4362 0.6188 0.02617 2e-3 0.04878 0.0043 0.05024 0.0053 0.0014 9.82e-4 0.0027-2.88e-4 0.0027-0.0029z" strokeWidth="0.010576"/>; break;
        case 'cloud': path = <path className="Circle-icon" d="m20.516 10.402a3.9834 3.9834 0 0 0-3.2975 1.7599 1.8257 1.8257 0 0 0-0.15079-8e-3 1.8257 1.8257 0 0 0-1.7757 1.4206 2.3974 2.3974 0 0 0-0.0496 0 2.3974 2.3974 0 0 0-2.3987 2.3968 2.3974 2.3974 0 0 0 2.3987 2.3987h8.4759a3.4383 3.4383 0 0 0 3.4384-3.4384 3.4383 3.4383 0 0 0-3.4384-3.4384 3.4383 3.4383 0 0 0-0.43252 0.02976 3.9834 3.9834 0 0 0-2.7698-1.121z" strokeWidth="1.2458"/>; break;
        case 'uvi': path = <path className="Circle-icon" d="m15.476 18.321c-0.05573-0.04508-0.06095-0.07038-0.06899-0.33387-0.0098-0.32073 1e-3 -0.38868 0.07319-0.46087 0.04983-0.04983 0.10368-0.05043 4.5202-0.05043 4.4165 0 4.4704 5.68e-4 4.5202 0.05043 0.07219 0.07219 0.08298 0.14014 0.07319 0.46087-8e-3 0.26349-0.01327 0.28879-0.06899 0.33387-0.05883 0.04759-0.16873 0.04878-4.5244 0.04878-4.3557 0-4.4656-0.0012-4.5244-0.04878zm3.4886-1.2027c-0.17925-9e-3 -0.27631-0.02569-0.32155-0.05543-0.04068-0.02674-0.13052-0.17413-0.24131-0.39589-0.09708-0.19431-0.18225-0.35904-0.18928-0.36606-7e-3 -7e-3 -0.07528-0.1392-0.15168-0.29373-0.0764-0.15453-0.26721-0.52807-0.42401-0.8301-0.1568-0.30203-0.47529-0.92268-0.70775-1.3792-0.23246-0.45655-0.53604-1.0485-0.67463-1.3154-0.13858-0.26691-0.37109-0.72204-0.51667-1.0114-0.32176-0.63952-0.3236-0.60917 0.0483-0.79668 0.36361-0.18333 0.31995-0.22029 0.77163 0.65312 0.205 0.39641 0.55363 1.0771 0.77472 1.5125 0.2211 0.43548 0.41038 0.80328 0.42064 0.81733 0.01026 0.01405 0.24382 0.46805 0.51902 1.0089 0.70004 1.3757 0.65914 1.3022 0.7242 1.3024 0.03855 1.54e-4 0.07342-0.03108 0.11265-0.10089 0.09421-0.16763 0.16276-0.17349 0.42621-0.03645 0.24495 0.12742 0.31202 0.18814 0.31202 0.2825 0 0.06737-0.34764 0.77363-0.43624 0.88627-0.08859 0.11263-0.16306 0.13235-0.44627 0.1182zm1.7252-0.02945c-0.10282-0.06255-0.13847-0.12292-0.53326-0.90287-0.3282-0.64839-0.37597-0.72865-0.51162-0.85958-0.14652-0.14144-0.14935-0.1468-0.13668-0.25921 0.0142-0.12595 0.03794-0.07228-0.46559-1.0522-0.12993-0.25286-0.41166-0.80456-0.62606-1.226-0.21441-0.42143-0.39828-0.77774-0.4086-0.79178-0.07204-0.09805-0.51065-1.0104-0.51065-1.0622 0-0.09264 0.0398-0.1308 0.25542-0.24486 0.22786-0.12055 0.29281-0.13999 0.36985-0.1107 0.07064 0.02686 0.12054 0.11603 0.66475 1.1879 0.6351 1.2509 1.1123 2.1652 1.1564 2.2157 0.05078 0.05818 0.07924 0.05637 0.14935-0.0095 0.07698-0.07231 0.16851-0.05337 0.43089 0.08921 0.25613 0.13917 0.29203 0.19745 0.2208 0.35848-0.07379 0.1668-0.19552 0.21186-0.35197 0.13026-0.09187-0.04791-0.16255-0.04921-0.16255-3e-3 0 0.03407 0.36805 0.77071 0.60438 1.2097 0.09067 0.1684 0.12506 0.21072 0.17124 0.21072 0.04105 0 0.07032-0.02627 0.10105-0.09072 0.02664-0.05588 0.07473-0.10395 0.12519-0.12517 0.07795-0.03278 0.09388-0.02845 0.32803 0.08905 0.37111 0.18623 0.36983 0.17557 0.08842 0.73347-0.27334 0.5419-0.27654 0.54465-0.64218 0.55112-0.19067 0.0034-0.26316-0.0053-0.31661-0.03779zm1.1131-1.7072c-0.18145-0.09192-0.23473-0.13185-0.26063-0.19534-0.02874-0.07043-0.02595-0.09291 0.02373-0.1914 0.03148-0.0624 0.08733-0.12632 0.1267-0.14499 0.06502-0.03085 0.08942-0.02395 0.31927 0.09027 0.30135 0.14975 0.34161 0.20492 0.27562 0.37773-0.08128 0.21283-0.16788 0.22422-0.48469 0.06372zm0.48348-0.88547c-0.22758-0.11571-0.29373-0.17658-0.29373-0.2703 0-0.12398 0.12019-0.30037 0.20466-0.30037 0.07158 0 0.55304 0.24739 0.57062 0.2932 0.0091 0.02366 0.01647 0.06794 0.01641 0.0984-1.02e-4 0.05831-0.08836 0.22101-0.13721 0.25294-0.0608 0.03973-0.18891 0.0135-0.36075-0.07386zm-1.3537-0.82253c-0.1361-0.04503-0.42501-0.21513-0.46246-0.27228-0.03925-0.0599-0.03915-0.0722 0.0016-0.1788 0.04685-0.12266 0.12055-0.19101 0.206-0.19101 0.07134 0 0.44778 0.18633 0.50567 0.25029 0.02542 0.02809 0.0472 0.08546 0.0484 0.12747 0.0028 0.09725-0.09089 0.25033-0.16537 0.27029-0.06428 0.01724-0.06359 0.01725-0.1338-0.0059zm1.807-0.0912c-0.3023-0.14713-0.33538-0.2056-0.23434-0.41431 0.08165-0.16867 0.1632-0.17244 0.4562-0.02111 0.12808 0.06615 0.24512 0.14315 0.26008 0.17112 0.06146 0.11484-0.0779 0.3775-0.20028 0.3775-0.02699 0-0.15374-0.05094-0.28165-0.1132zm-1.5427-0.90222c-0.29482-0.14961-0.33565-0.20563-0.26466-0.36307 0.05408-0.11993 0.1241-0.17954 0.21086-0.17954 0.08165 0 0.51071 0.21945 0.53631 0.2743 0.03066 0.06571 0.02024 0.16168-0.0276 0.25419-0.04721 0.0913-0.05376 0.09656-0.14842 0.11914-0.05096 0.01216-0.12682-0.01384-0.3065-0.10502zm2.1972 0.09474c-0.0925-0.02517-0.35473-0.17053-0.42454-0.23533-0.12843-0.1192-7e-3 -0.40202 0.17257-0.40202 0.06879 0 0.50852 0.21552 0.5422 0.26574 0.03704 0.05523 0.01849 0.18801-0.03792 0.27148-0.06338 0.09378-0.14971 0.12804-0.25231 0.10012zm0.26577-0.99659c-0.13681-0.07114-0.25741-0.14297-0.268-0.15962-0.03256-0.0512-0.02237-0.12424 0.03337-0.23941 0.05421-0.11198 0.12913-0.15511 0.24032-0.13833 0.06582 0.0099 0.36591 0.17409 0.44059 0.24102 0.11017 0.09873 0.04242 0.32778-0.11608 0.39246-0.07716 0.03149-0.09457 0.02642-0.33021-0.09611zm-2.0121-2e-3c-0.11238-0.05676-0.2187-0.1216-0.23626-0.14408-0.08316-0.10649 0.01383-0.354 0.15325-0.39112 0.05485-0.0146 0.11949 0.0053 0.29498 0.09068 0.27079 0.1318 0.33161 0.20405 0.28966 0.34409-0.03993 0.13326-0.11682 0.20645-0.21529 0.20491-0.04511-7.57e-4 -0.17396-0.04771-0.28635-0.10447zm0.47611-0.89498c-0.26608-0.13369-0.33492-0.20036-0.30022-0.29079 0.02742-0.07144 0.19161-0.03038 0.44166 0.11045 0.15909 0.0896 0.23234 0.14655 0.24923 0.19374 0.02764 0.07726 0.02363 0.08397-0.06227 0.10438-0.04627 0.01098-0.13652-0.02138-0.32839-0.11778zm2.0142 0.0067c-0.247-0.12667-0.35134-0.22142-0.32357-0.2938 0.02575-0.06708 0.14748-0.04646 0.376 0.0637 0.31273 0.15076 0.42177 0.26778 0.30683 0.3293-0.07591 0.04063-0.0992 0.0342-0.35926-0.09919z" strokeWidth="0.025542"/>; break;
        case 'press': path = <path className="Circle-icon" d="m20.577 18.335c0.65103-0.08449 1.3591-0.3459 1.9015-0.70196 0.378-0.24818 1.0479-0.91812 1.2961-1.2961 0.97496-1.485 0.97496-3.4684 0-4.9534-0.24818-0.378-0.91812-1.0479-1.2961-1.2961-1.5547-1.0207-3.6577-0.96778-5.13 0.12913-1.5153 1.1289-2.1739 2.9837-1.7056 4.8036 0.55339 2.1509 2.7146 3.6028 4.9342 3.3148zm-1.519-0.75909c-1.3519-0.34654-2.41-1.4033-2.7756-2.7719-0.13134-0.49168-0.13134-1.3958 0-1.8875 0.36528-1.3674 1.4082-2.4103 2.7756-2.7756 0.28294-0.07558 0.44442-0.09119 0.94374-0.09119 0.49931 0 0.66079 0.0156 0.94374 0.09119 1.3672 0.36521 2.4069 1.4046 2.7764 2.7756 0.13158 0.48812 0.13107 1.3917-1e-3 1.8875-0.40114 1.5054-1.6099 2.598-3.1569 2.8537-0.3465 0.05727-1.1294 0.01477-1.506-0.08175zm-1.4765-1.9788 0.27041-0.15641-0.07652-0.1477c-0.04208-0.08124-0.10202-0.18171-0.1332-0.22329-0.05503-0.07339-0.05995-0.07345-0.16865-0.0022-0.109 0.07141-0.11347 0.07129-0.16916-0.0048-0.03145-0.04295-0.09703-0.20459-0.14573-0.3592-0.12897-0.40951-0.12824-1.2815 0.0015-1.6867 0.12923-0.40388 0.14146-0.41745 0.29709-0.32957 0.14295 0.08073 0.14303 0.08068 0.29283-0.18022l0.10824-0.18851-0.29242-0.15002 0.18284-0.22446c0.41529-0.50981 1.1326-0.91008 1.8214-1.0163l0.17068-0.02633v0.32833h0.52207v-0.16064c0-0.08835 0.01474-0.16064 0.03278-0.16064 0.0742 0 0.50672 0.08894 0.59411 0.12216 0.09142 0.03476 0.07665 0.06238-0.50494 0.94514-0.56422 0.85638-0.61041 0.91457-0.79308 0.9992-0.40881 0.18941-0.59388 0.48402-0.59388 0.94543 0 0.25586 0.01654 0.32931 0.10984 0.48803 0.34881 0.59336 1.185 0.68332 1.6309 0.17546 0.27246-0.31031 0.33166-0.73261 0.15639-1.1155l-0.0972-0.21232 0.11272-1.0835c0.06199-0.59591 0.11332-1.0882 0.11404-1.094 0.0043-0.03349 0.5813 0.29073 0.78591 0.44154 0.22373 0.16491 0.65304 0.61685 0.61666 0.64917-0.0087 0.0077-0.07293 0.04306-0.14282 0.07858l-0.12706 0.06459 0.12111 0.22361c0.06662 0.12299 0.13283 0.21762 0.14714 0.2103 0.24704-0.12634 0.25208-0.12753 0.29012-0.06869 0.11306 0.17489 0.20713 0.60901 0.22578 1.0419 0.02159 0.5013-0.03708 0.89149-0.184 1.2236l-0.08047 0.1819-0.26556-0.15572-0.25517 0.43337 0.25712 0.16238c0.14141 0.08931 0.27353 0.16238 0.29358 0.16238 0.06618 0 0.40715-0.73685 0.49246-1.0642 0.11732-0.4502 0.11657-1.1615-0.0017-1.6064-0.3297-1.2405-1.2992-2.1642-2.5533-2.4327-0.37133-0.07948-1.0645-0.06003-1.4457 0.04058-1.1876 0.31338-2.0801 1.206-2.3917 2.3921-0.10757 0.40936-0.11811 1.1183-0.0226 1.5192 0.08015 0.3364 0.26839 0.79471 0.41637 1.0138l0.11048 0.16355zm2.1191-1.2716c-0.25853-0.17749-0.29786-0.53615-0.08491-0.77448 0.09318-0.10428 0.14806-0.1279 0.33275-0.14322 0.20338-0.01686 0.23277-0.0082 0.36536 0.10826 0.48424 0.42517-0.08274 1.1736-0.61319 0.80944z" strokeWidth="0.040159"/>; break;
        default: path = <path className="Circle-icon" d="m20.435 10.184a3.3592 3.3592 0 0 0-2.7808 1.4841 1.5396 1.5396 0 0 0-0.12716-0.0067 1.5396 1.5396 0 0 0-1.4975 1.198 2.0217 2.0217 0 0 0-0.04183 0 2.0217 2.0217 0 0 0-2.0228 2.0212 2.0217 2.0217 0 0 0 2.0228 2.0228h7.1476a2.8995 2.8995 0 0 0 2.8995-2.8996 2.8995 2.8995 0 0 0-2.8995-2.8995 2.8995 2.8995 0 0 0-0.36474 0.0251 3.3592 3.3592 0 0 0-2.3357-0.94532z" strokeWidth="1.0506"/>; break;
    }
    return (
        <div>
            <svg width="100%" height="100%" viewBox="0 0 40 40" className="Circle">
                <circle className="Circle-hole" cx="20" cy="20" r="15.91549430918954"></circle>
                <circle className="Circle-ring" cx="20" cy="20" r="15.91549430918954"></circle>
                <circle className="Circle-segment" cx="20" cy="20" r="15.91549430918954" strokeDasharray={dasharray} strokeDashoffset="25"></circle>
                {path}
                <g className="Circle-text">
                    <text y="50%" transform="translate(0, 7)">
                        <tspan x="50%" textAnchor="middle" className="Circle-percent">{mainVal}</tspan>   
                    </text>
                </g>
            </svg>
        </div>
    );
  }
  export default CircleChart;